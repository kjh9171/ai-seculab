<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Seculab | 보안 인텔리전스 컨설팅</title>
    <!-- Tailwind CSS CDN (현대적인 스타일링을 위함) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React 및 ReactDOM CDN (SPA 구현을 위함) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel CDN (JSX 변환을 위함) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Chart.js CDN (데이터 시각화를 위함) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: 가독성 높은 Inter 폰트 적용 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* 폰트 및 기본 스타일 설정 */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* 화이트 배경 위주의 라이트 테마 */
            color: #334155; /* Slate-700 계열의 텍스트 색상 */
            margin: 0;
            overflow-x: hidden;
        }
        /* 볼드체 사용 금지 규칙 적용: 모든 요소의 폰트 두께를 300~400으로 제한 */
        * {
            font-weight: 300 !important;
        }
        .font-normal {
            font-weight: 400 !important;
        }
        /* 부드러운 전환 효과 */
        .transition-all {
            transition: all 0.3s ease;
        }
        /* 유리창 효과 (Glassmorphism) - 포인트 요소용 */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        /* 히어로 섹션 캔버스 스타일 */
        #hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.4;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Firebase SDK (v9 Compat 사용으로 단일 파일 호환성 확보) -->
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth-compat.js"></script>

    <script type="text/babel">
        // --- Firebase 초기화 및 상수 설정 ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY", // 사용자가 실제 키로 교체 필요
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "ai-seculab-web-01"
        };
        
        // Firebase 앱 초기화
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        const auth = firebase.auth();

        // 사용자 요청에 따른 Firestore 경로 규칙 설정
        const APP_ID = "ai-seculab-pro";
        const COLLECTION_NAME = "inquiries";
        const DATA_PATH = `/artifacts/${APP_ID}/public/data/${COLLECTION_NAME}`;

        // --- 유틸리티 컴포넌트: 통계 차트 ---
        const ThreatChart = () => {
            const chartRef = React.useRef(null);
            React.useEffect(() => {
                const ctx = chartRef.current.getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Detected Vulnerabilities',
                            data: [12, 19, 3, 5, 2, 3],
                            borderColor: '#1e293b', // Navy 계열 포인트
                            borderWidth: 1,
                            fill: false,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { y: { display: false }, x: { grid: { display: false } } }
                    }
                });
            }, []);
            return <canvas ref={chartRef} className="w-full h-32"></canvas>;
        };

        // --- 메인 애플리케이션 컴포넌트 ---
        const App = () => {
            const [view, setView] = React.useState('home'); // 현재 화면 상태 (home, admin)
            const [inquiries, setInquiries] = React.useState([]); // 문의 내역 상태
            const [isAdminAuthenticated, setIsAdminAuthenticated] = React.useState(false); // 관리자 인증 상태
            const [formData, setFormData] = React.useState({ name: '', email: '', message: '' }); // 폼 입력 관리

            // --- 폼 제출 로직 (Firebase 연동) ---
            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    // 1. 익명 인증 필수 규칙 준수
                    await auth.signInAnonymously();
                    
                    // 2. 문의 내용 저장
                    const docRef = db.collection(DATA_PATH).doc();
                    await docRef.set({
                        ...formData,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        status: 'pending', // 기본 상태: 대기중
                        checkedBy: null    // 확인자 없음
                    });
                    
                    alert('문의가 성공적으로 접수되었습니다. 전문가가 검토 후 연락드리겠습니다.');
                    setFormData({ name: '', email: '', message: '' });
                } catch (error) {
                    console.error("Submission Error:", error);
                    alert('접수 중 오류가 발생했습니다.');
                }
            };

            // --- 관리자 로그인 로직 ---
            const handleAdminLogin = () => {
                const password = prompt('관리자 암호를 입력하십시오:');
                if (password === 'seculab2026') { // 예시 암호
                    setIsAdminAuthenticated(true);
                    fetchInquiries();
                } else {
                    alert('인증에 실패했습니다.');
                }
            };

            // --- 문의 내역 불러오기 (단순 쿼리 후 필터링 규칙 준수) ---
            const fetchInquiries = async () => {
                try {
                    await auth.signInAnonymously();
                    const snapshot = await db.collection(DATA_PATH).orderBy('createdAt', 'desc').get();
                    const list = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    setInquiries(list);
                } catch (error) {
                    console.error("Fetch Error:", error);
                }
            };

            // --- 문의 상태 업데이트 로직 ---
            const updateStatus = async (id, newStatus) => {
                try {
                    await db.collection(DATA_PATH).doc(id).update({
                        status: newStatus,
                        checkedBy: 'Security Expert' // 고정 타이틀 사용
                    });
                    fetchInquiries(); // 목록 갱신
                } catch (error) {
                    alert('수정 실패');
                }
            };

            // --- 히어로 섹션 애니메이션 구현 (Canvas) ---
            React.useEffect(() => {
                const canvas = document.getElementById('hero-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let particles = [];
                const particleCount = 40;

                const init = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    particles = [];
                    for(let i=0; i<particleCount; i++) {
                        particles.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            vx: (Math.random() - 0.5) * 0.5,
                            vy: (Math.random() - 0.5) * 0.5
                        });
                    }
                };

                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.strokeStyle = '#94a3b8'; // Slate-400
                    ctx.lineWidth = 0.5;

                    particles.forEach((p, i) => {
                        p.x += p.vx;
                        p.y += p.vy;
                        if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
                        if(p.y < 0 || p.y > canvas.height) p.vy *= -1;

                        for(let j=i+1; j<particles.length; j++) {
                            const p2 = particles[j];
                            const dist = Math.sqrt((p.x-p2.x)**2 + (p.y-p2.y)**2);
                            if(dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(p2.x, p2.y);
                                ctx.stroke();
                            }
                        }
                    });
                    requestAnimationFrame(animate);
                };

                init();
                animate();
                window.addEventListener('resize', init);
                return () => window.removeEventListener('resize', init);
            }, []);

            return (
                <div className="min-h-screen flex flex-col">
                    {/* 상단 네비게이션 */}
                    <header className="fixed top-0 w-full z-50 glass border-b border-slate-100">
                        <div className="max-w-7xl mx-auto px-8 h-20 flex items-center justify-between">
                            <h1 className="text-2xl tracking-tight text-slate-800 font-normal">
                                AI <span className="text-slate-400">Seculab</span>
                            </h1>
                            <nav className="flex gap-12 text-sm text-slate-500">
                                <a href="#hero" className="hover:text-slate-900 transition-all">Vision</a>
                                <a href="#services" className="hover:text-slate-900 transition-all">Expertise</a>
                                <a href="#contact" className="hover:text-slate-900 transition-all">Consulting</a>
                                <button onClick={() => view === 'home' ? handleAdminLogin() : setView('home')} 
                                        className="hover:text-slate-900 transition-all">
                                    {view === 'home' ? 'Admin' : 'Home'}
                                </button>
                            </nav>
                        </div>
                    </header>

                    {view === 'home' ? (
                        <main className="flex-grow pt-20">
                            {/* 히어로 섹션 */}
                            <section id="hero" className="relative h-screen flex items-center justify-center overflow-hidden">
                                <canvas id="hero-canvas"></canvas>
                                <div className="relative z-10 text-center px-4 max-w-4xl">
                                    <span className="text-xs tracking-[0.3em] text-slate-400 uppercase mb-6 block">Future of Cyber Security</span>
                                    <h2 className="text-5xl md:text-7xl mb-8 leading-tight text-slate-900 font-normal">
                                        보안의 지능화, <br/>
                                        그 이상의 인텔리전스.
                                    </h2>
                                    <p className="text-lg text-slate-500 mb-12 font-normal leading-relaxed">
                                        AI Seculab은 독보적인 AI 기술력과 실무 보안 경험을 결합하여 <br/>
                                        비즈니스의 연속성을 완벽하게 보호합니다.
                                    </p>
                                    <div className="flex justify-center gap-4">
                                        <a href="#contact" className="px-8 py-3 bg-slate-900 text-white text-sm hover:bg-slate-800 transition-all">
                                            상담 신청하기
                                        </a>
                                        <a href="#services" className="px-8 py-3 border border-slate-200 text-sm hover:bg-slate-50 transition-all">
                                            핵심 역량 보기
                                        </a>
                                    </div>
                                </div>
                            </section>

                            {/* 서비스 섹션 */}
                            <section id="services" className="py-32 bg-slate-50">
                                <div className="max-w-7xl mx-auto px-8">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-16">
                                        <div className="group">
                                            <div className="mb-8 text-slate-300 group-hover:text-slate-900 transition-all duration-700">
                                                <div className="w-12 h-1 bg-current mb-2"></div>
                                                <span className="text-xs uppercase tracking-widest">01</span>
                                            </div>
                                            <h3 className="text-2xl mb-6 text-slate-800 font-normal">AI 취약점 탐지</h3>
                                            <p className="text-slate-500 leading-relaxed mb-8">
                                                단순 스캐닝을 넘어 LLM 기반의 지능형 코드 분석으로 복합적인 보안 홀을 실시간으로 감지합니다.
                                            </p>
                                            <ThreatChart />
                                        </div>
                                        <div className="group">
                                            <div className="mb-8 text-slate-300 group-hover:text-slate-900 transition-all duration-700">
                                                <div className="w-12 h-1 bg-current mb-2"></div>
                                                <span className="text-xs uppercase tracking-widest">02</span>
                                            </div>
                                            <h3 className="text-2xl mb-6 text-slate-800 font-normal">보안 전략 컨설팅</h3>
                                            <p className="text-slate-500 leading-relaxed">
                                                대기업 및 금융권 출신 전문가가 제시하는 ISMS-P 등 국내외 인증 최적화 전략과 리스크 매니지먼트를 제공합니다.
                                            </p>
                                        </div>
                                        <div className="group">
                                            <div className="mb-8 text-slate-300 group-hover:text-slate-900 transition-all duration-700">
                                                <div className="w-12 h-1 bg-current mb-2"></div>
                                                <span className="text-xs uppercase tracking-widest">03</span>
                                            </div>
                                            <h3 className="text-2xl mb-6 text-slate-800 font-normal">위협 인텔리전스</h3>
                                            <p className="text-slate-500 leading-relaxed">
                                                글로벌 다크웹 및 최신 취약점 데이터를 분석하여 귀사만을 위한 맞춤형 위협 경보 시스템을 구축합니다.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* 문의하기 섹션 */}
                            <section id="contact" className="py-32 bg-white">
                                <div className="max-w-3xl mx-auto px-8 text-center">
                                    <h2 className="text-3xl mb-16 text-slate-900 font-normal">전문가와 대화를 시작하십시오.</h2>
                                    <form onSubmit={handleSubmit} className="space-y-8 text-left">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                            <div className="border-b border-slate-200">
                                                <label className="text-[10px] uppercase text-slate-400 block mb-2">Full Name</label>
                                                <input type="text" 
                                                    value={formData.name}
                                                    onChange={(e)=>setFormData({...formData, name: e.target.value})}
                                                    placeholder="성함을 입력하십시오" 
                                                    className="w-full py-2 outline-none text-slate-700 placeholder:text-slate-200" required />
                                            </div>
                                            <div className="border-b border-slate-200">
                                                <label className="text-[10px] uppercase text-slate-400 block mb-2">Email Address</label>
                                                <input type="email" 
                                                    value={formData.email}
                                                    onChange={(e)=>setFormData({...formData, email: e.target.value})}
                                                    placeholder="example@gmail.com" 
                                                    className="w-full py-2 outline-none text-slate-700 placeholder:text-slate-200" required />
                                            </div>
                                        </div>
                                        <div className="border-b border-slate-200">
                                            <label className="text-[10px] uppercase text-slate-400 block mb-2">Inquiry Content</label>
                                            <textarea 
                                                value={formData.message}
                                                onChange={(e)=>setFormData({...formData, message: e.target.value})}
                                                rows="4" 
                                                placeholder="보안 문제에 대해 설명해 주십시오" 
                                                className="w-full py-2 outline-none text-slate-700 placeholder:text-slate-200 resize-none" required></textarea>
                                        </div>
                                        <button className="w-full py-4 bg-slate-900 text-white text-sm hover:bg-slate-800 transition-all font-normal">
                                            문의 보내기 (Send Request)
                                        </button>
                                    </form>
                                </div>
                            </section>
                        </main>
                    ) : (
                        /* 어드민 대시보드 화면 */
                        <main className="flex-grow pt-32 px-8 bg-slate-50">
                            <div className="max-w-6xl mx-auto">
                                <div className="flex justify-between items-center mb-12">
                                    <h2 className="text-2xl text-slate-800 font-normal">Inquiry Management</h2>
                                    <div className="text-xs text-slate-400">Total: {inquiries.length} cases</div>
                                </div>
                                
                                {isAdminAuthenticated ? (
                                    <div className="bg-white border border-slate-200 overflow-hidden">
                                        <table className="w-full text-left text-sm">
                                            <thead className="bg-slate-50 border-b border-slate-200 text-slate-400 text-[10px] uppercase">
                                                <tr>
                                                    <th className="px-6 py-4">Status</th>
                                                    <th className="px-6 py-4">Name</th>
                                                    <th className="px-6 py-4">Message</th>
                                                    <th className="px-6 py-4">Time</th>
                                                    <th className="px-6 py-4">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-100">
                                                {inquiries.map(item => (
                                                    <tr key={item.id} className="hover:bg-slate-50 transition-all">
                                                        <td className="px-6 py-6">
                                                            <span className={`px-2 py-1 text-[10px] ${item.status === 'completed' ? 'bg-navy-50 text-slate-500 border border-slate-200' : 'bg-slate-100 text-slate-400'}`}>
                                                                {item.status.toUpperCase()}
                                                            </span>
                                                        </td>
                                                        <td className="px-6 py-6 text-slate-800">{item.name}</td>
                                                        <td className="px-6 py-6 text-slate-500 max-w-xs truncate">{item.message}</td>
                                                        <td className="px-6 py-6 text-slate-400 text-xs">
                                                            {item.createdAt?.toDate().toLocaleString()}
                                                        </td>
                                                        <td className="px-6 py-6">
                                                            <button 
                                                                onClick={() => updateStatus(item.id, 'completed')}
                                                                className="text-slate-400 hover:text-slate-900 underline underline-offset-4 text-xs">
                                                                {item.checkedBy ? 'Done' : 'Check'}
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                ) : (
                                    <div className="py-32 text-center text-slate-400">
                                        관리자 권한을 인증하십시오.
                                    </div>
                                )}
                            </div>
                        </main>
                    )}

                    {/* 푸터 영역 */}
                    <footer className="py-20 bg-white border-t border-slate-100">
                        <div className="max-w-7xl mx-auto px-8 flex flex-col md:flex-row justify-between items-center gap-12">
                            <div className="text-left">
                                <h4 className="text-xl mb-4 font-normal text-slate-800">AI Seculab</h4>
                                <p className="text-sm text-slate-400 leading-loose">
                                    Senior Security Consultant: 보안 전문가 <br/>
                                    Email: gimjonghwan319@gmail.com <br/>
                                    Intelligence and Strategy for your safety.
                                </p>
                            </div>
                            <div className="flex gap-16 text-[10px] uppercase tracking-[0.2em] text-slate-400">
                                <a href="#" className="hover:text-slate-900">Policy</a>
                                <a href="#" className="hover:text-slate-900">Terms</a>
                                <a href="#" className="hover:text-slate-900">LinkedIn</a>
                            </div>
                        </div>
                        <div className="text-center mt-20 text-[10px] text-slate-200 tracking-widest">
                            © 2026 AI SECULAB. ALL RIGHTS RESERVED.
                        </div>
                    </footer>
                </div>
            );
        };

        // DOM 렌더링
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
