<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Seculab | 보안 인텔리전스 컨설팅</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React 및 ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel CDN -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Inter 적용 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #334155;
            margin: 0;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* 볼드체 사용 금지 규칙 적용 */
        * {
            font-weight: 300 !important;
        }

        .font-normal {
            font-weight: 400 !important;
        }

        .transition-all {
            transition: all 0.3s ease;
        }

        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        #hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.4;
        }

        /* 다크모드 대응 */
        .dark-theme {
            background-color: #0f172a;
            color: #f1f5f9;
        }

        .dark-theme .glass {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dark-theme header {
            border-bottom-color: rgba(255, 255, 255, 0.05);
        }

        .dark-theme input,
        .dark-theme textarea {
            color: #f1f5f9;
            border-color: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body class="">
    <div id="root"></div>

    <!-- Firebase SDK (v9 Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth-compat.js"></script>

    <script type="text/babel">
        // --- Firebase 초기화 ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY", // 실제 키로 교환 필요
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "ai-seculab-web-01"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        const APP_ID = "ai-seculab-pro";
        const COLLECTION_NAME = "inquiries";
        const DATA_PATH = `/artifacts/${APP_ID}/public/data/${COLLECTION_NAME}`;

        // --- 컴포넌트: 통계 차트 ---
        const ThreatChart = ({ isDark }) => {
            const chartRef = React.useRef(null);
            React.useEffect(() => {
                const ctx = chartRef.current.getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Threats',
                            data: [12, 19, 3, 5, 2, 3],
                            borderColor: isDark ? '#6366f1' : '#1e293b',
                            borderWidth: 1,
                            fill: false,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { y: { display: false }, x: { grid: { display: false } } }
                    }
                });
                return () => chart.destroy();
            }, [isDark]);
            return <canvas ref={chartRef} className="w-full h-32"></canvas>;
        };

        const App = () => {
            const [view, setView] = React.useState('home');
            const [isDark, setIsDark] = React.useState(false);
            const [inquiries, setInquiries] = React.useState([]);
            const [isAdminAuth, setIsAdminAuth] = React.useState(false);
            const [formData, setFormData] = React.useState({ name: '', email: '', message: '' });

            // 테마 적용
            React.useEffect(() => {
                if (isDark) document.body.classList.add('dark-theme');
                else document.body.classList.remove('dark-theme');
            }, [isDark]);

            // 문의사항 제출: 이메일 발송 대신 DB에 즉시 저장 (Admin에서 확인 가능)
            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    await auth.signInAnonymously();
                    await db.collection(DATA_PATH).add({
                        ...formData,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        status: 'pending',
                        checkedBy: null
                    });
                    alert('문의사항이 관리자 대시보드로 성공적으로 전달되었습니다.');
                    setFormData({ name: '', email: '', message: '' });
                } catch (error) {
                    alert('전송 중 오류가 발생했습니다.');
                }
            };

            // 관리자 인증: 가입 절차 없이 사전 합의된 마스터 암호 방식 채택
            const handleAdminAccess = () => {
                if (view === 'admin') {
                    setView('home');
                    return;
                }
                // 실무에서 가장 빠르고 효율적인 '마스터 패스코드' 방식
                // 별도의 복잡한 가입/로그인 UI 없이 즉각적인 관리 업무 진입 가능
                const pw = prompt('보안 전문가 전용 암호를 입력하십시오:');
                if (pw === 'seculab2026') {
                    setIsAdminAuth(true);
                    setView('admin');
                    fetchInquiries();
                } else {
                    alert('권한이 없습니다.');
                }
            };

            const fetchInquiries = async () => {
                try {
                    await auth.signInAnonymously();
                    const snap = await db.collection(DATA_PATH).orderBy('createdAt', 'desc').get();
                    setInquiries(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                } catch (error) { console.error(error); }
            };

            const updateStatus = async (id, status) => {
                await db.collection(DATA_PATH).doc(id).update({
                    status,
                    checkedBy: 'Security Expert'
                });
                fetchInquiries();
            };

            // 히어로 캔버스 애니메이션
            React.useEffect(() => {
                const canvas = document.getElementById('hero-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let pts = [];
                const init = () => {
                    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
                    pts = Array.from({ length: 40 }, () => ({
                        x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5
                    }));
                };
                const anim = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.strokeStyle = isDark ? 'rgba(99,102,241,0.2)' : 'rgba(148,163,184,0.4)';
                    pts.forEach((p, i) => {
                        p.x += p.vx; p.y += p.vy;
                        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                        for (let j = i + 1; j < pts.length; j++) {
                            const d = Math.sqrt((p.x - pts[j].x) ** 2 + (p.y - pts[j].y) ** 2);
                            if (d < 150) {
                                ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(pts[j].x, pts[j].y); ctx.stroke();
                            }
                        }
                    });
                    requestAnimationFrame(anim);
                };
                init(); anim();
                window.addEventListener('resize', init);
                return () => window.removeEventListener('resize', init);
            }, [isDark]);

            return (
                <div className="min-h-screen flex flex-col">
                    <header className="fixed top-0 w-full z-50 glass border-b">
                        <div className="max-w-7xl mx-auto px-8 h-20 flex items-center justify-between">
                            <h1 className="text-2xl tracking-tighter cursor-pointer" onClick={() => setView('home')}>
                                AI <span className={isDark ? "text-indigo-400" : "text-slate-400"}>Seculab</span>
                            </h1>
                            <nav className="flex gap-10 text-[11px] uppercase tracking-widest text-slate-500">
                                <a href="#hero" className="hover:text-slate-900 dark:hover:text-white transition-all" onClick={() => setView('home')}>Vision</a>
                                <a href="#services" className="hover:text-slate-900 dark:hover:text-white transition-all" onClick={() => setView('home')}>Expertise</a>
                                <a href="#contact" className="hover:text-slate-900 dark:hover:text-white transition-all" onClick={() => setView('home')}>Consulting</a>
                                <button onClick={handleAdminAccess} className="text-indigo-500">
                                    {view === 'admin' ? 'Home' : 'Admin'}
                                </button>
                                <button onClick={() => setIsDark(!isDark)} className="text-slate-400">
                                    {isDark ? 'Light' : 'Dark'}
                                </button>
                            </nav>
                        </div>
                    </header>

                    {view === 'home' ? (
                        <main className="flex-grow pt-20">
                            <section id="hero" className="relative h-screen flex items-center justify-center overflow-hidden">
                                <canvas id="hero-canvas"></canvas>
                                <div className="relative z-10 text-center px-4 max-w-4xl">
                                    <span className="text-[10px] tracking-[0.4em] text-slate-400 uppercase mb-8 block">Next Generation Intelligence</span>
                                    <h2 className="text-5xl md:text-7xl mb-10 leading-tight font-normal">
                                        보안의 지능화, <br />
                                        그 이상의 가치.
                                    </h2>
                                    <p className="text-lg text-slate-400 mb-14 leading-relaxed">
                                        AI Seculab은 독보적인 분석 기술로 비즈니스의 안전을 설계합니다.
                                    </p>
                                    <div className="flex justify-center gap-6">
                                        <a href="#contact" className="px-10 py-4 bg-slate-900 text-white dark:bg-indigo-600 text-xs tracking-widest hover:scale-105 transition-all">상담 신청(Consulting)</a>
                                    </div>
                                </div>
                            </section>

                            <section id="services" className="py-40 bg-slate-50 dark:bg-slate-900/50">
                                <div className="max-w-7xl mx-auto px-8 grid grid-cols-1 md:grid-cols-3 gap-16">
                                    <div className="p-10 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 transition-all">
                                        <h3 className="text-2xl mb-6 font-normal">AI 취약점 탐지</h3>
                                        <p className="text-slate-500 mb-8 text-sm leading-relaxed">지능형 코드 분석 시스템을 통한 실시간 위협 대응.</p>
                                        <ThreatChart isDark={isDark} />
                                    </div>
                                    <div className="p-10 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 transition-all">
                                        <h3 className="text-2xl mb-6 font-normal">전략 컨설팅</h3>
                                        <p className="text-slate-500 text-sm leading-relaxed">정보보안 인증 최적화 로드맵 제안.</p>
                                    </div>
                                    <div className="p-10 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 transition-all">
                                        <h3 className="text-2xl mb-6 font-normal">인텔리전스</h3>
                                        <p className="text-slate-500 text-sm leading-relaxed">글로벌 위협 데이터 기반 선제적 방어 체계.</p>
                                    </div>
                                </div>
                            </section>

                            <section id="contact" className="py-40 bg-white dark:bg-slate-900">
                                <div className="max-w-3xl mx-auto px-8">
                                    <h2 className="text-3xl mb-20 text-center font-normal">전문가 상담 문의 (Inquiry)</h2>
                                    <form onSubmit={handleSubmit} className="space-y-12">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
                                            <input type="text" value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} placeholder="성함" className="bg-transparent border-b py-3 outline-none w-full" required />
                                            <input type="email" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} placeholder="이메일" className="bg-transparent border-b py-3 outline-none w-full" required />
                                        </div>
                                        <textarea value={formData.message} onChange={e => setFormData({ ...formData, message: e.target.value })} placeholder="문의 내용" rows="4" className="bg-transparent border-b py-3 outline-none w-full resize-none" required></textarea>
                                        <button className="w-full py-5 bg-slate-900 text-white dark:bg-indigo-600 text-xs tracking-widest hover:scale-[1.02] transition-all">
                                            전송하기 (SUBMIT TO DASHBOARD)
                                        </button>
                                    </form>
                                </div>
                            </section>
                        </main>
                    ) : (
                        <main className="flex-grow pt-32 px-8 bg-slate-50 dark:bg-slate-950">
                            <div className="max-w-6xl mx-auto">
                                <div className="flex justify-between items-end mb-16">
                                    <h2 className="text-4xl font-normal">Admin Dashboard</h2>
                                    <span className="text-xs text-indigo-500 tracking-widest">{inquiries.length} TOTAL CASES</span>
                                </div>

                                {isAdminAuth ? (
                                    <div className="glass overflow-hidden border">
                                        <table className="w-full text-left text-xs">
                                            <thead className="bg-slate-100 dark:bg-slate-800 text-slate-500 uppercase tracking-widest">
                                                <tr>
                                                    <th className="px-8 py-6">Status</th>
                                                    <th className="px-8 py-6">Client</th>
                                                    <th className="px-8 py-6">Inquiry Content</th>
                                                    <th className="px-8 py-6 text-right">Date</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-100 dark:divide-slate-800">
                                                {inquiries.map(item => (
                                                    <tr key={item.id} className="hover:bg-slate-50 dark:hover:bg-slate-900 transition-all group">
                                                        <td className="px-8 py-8">
                                                            <button
                                                                onClick={() => updateStatus(item.id, item.status === 'completed' ? 'pending' : 'completed')}
                                                                className={`px-3 py-1 border text-[9px] ${item.status === 'completed' ? 'border-indigo-500 text-indigo-500' : 'border-slate-300 text-slate-400'}`}>
                                                                {item.status?.toUpperCase() || 'NEW'}
                                                            </button>
                                                        </td>
                                                        <td className="px-8 py-8">
                                                            <div className="text-sm mb-1">{item.name}</div>
                                                            <div className="text-slate-400">{item.email}</div>
                                                        </td>
                                                        <td className="px-8 py-8 text-slate-400 leading-relaxed max-w-sm">
                                                            {item.message}
                                                        </td>
                                                        <td className="px-8 py-8 text-right text-slate-300">
                                                            {item.createdAt?.toDate().toLocaleDateString()}
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                        {inquiries.length === 0 && <div className="py-20 text-center text-slate-400">접수된 문의사항이 없습니다.</div>}
                                    </div>
                                ) : (
                                    <div className="py-40 text-center text-slate-400">Access Denied.</div>
                                )}
                            </div>
                        </main>
                    )}

                    <footer className="py-20 border-t border-slate-100 dark:border-slate-800 mt-20 opacity-50">
                        <div className="max-w-7xl mx-auto px-8 flex justify-between items-center text-[9px] tracking-[0.3em] uppercase">
                            <div className="text-left">
                                <p className="mb-2">Admin: 보안 전문가</p>
                                <p>GIMJONGHWAN319@GMAIL.COM</p>
                            </div>
                            <div className="text-center">© 2026 AI SECULAB</div>
                            <div className="flex gap-10">
                                <a href="#">LinkedIn</a>
                                <a href="#">Twitter</a>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>